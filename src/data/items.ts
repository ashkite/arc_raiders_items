import { ItemMetadata } from '../types';

type CategoryPreset = {
  category: ItemMetadata['category'];
  defaultKeepMin?: number;
  usedForCrafting?: boolean;
  usedForQuests?: boolean;
  usedForWorkshop?: boolean;
  usedForSpecialVendor?: boolean;
  maxStack?: number;
};

const WIKI_ITEMS = {
  Quick_Use: [
    "Adrenaline Shot",
    "Agave Juice",
    "Bandage",
    "Barricade Kit",
    "Binoculars",
    "Blaze Grenade",
    "Blaze Grenade Trap",
    "Deadline",
    "Defibrillator",
    "Door Blocker",
    "Explosive Mine",
    "Flame Spray",
    "Fruit Mix",
    "Gas Grenade",
    "Gas Grenade Trap",
    "Gas Mine",
    "Heavy Fuze Grenade",
    "Herbal Bandage",
    "Integrated Binoculars",
    "Integrated Shield Recharger",
    "Jolt Mine",
    "Li'l Smoke Grenade",
    "Light Impact Grenade",
    "Light Stick",
    "Lure Grenade",
    "Lure Grenade Trap",
    "Noisemaker",
    "Photoelectric Cloak",
    "Pulse Mine",
    "Recorder",
    "Remote Raider Flare",
    "Seeker Grenade",
    "Shield Recharger",
    "Showstopper",
    "Shrapnel Grenade",
    "Smoke Grenade",
    "Smoke Grenade Trap",
    "Snap Blast Grenade",
    "Snap Hook",
    "Sterilized Bandage",
    "Surge Shield Recharger",
    "Tagging Grenade",
    "Trailblazer",
    "Trigger 'Nade",
    "Vita Shot",
    "Vita Spray",
    "Wolfpack",
    "Zipline",
  ],
  Ammunition: [
    "Energy Clip",
    "Heavy Ammo",
    "Launcher Ammo",
    "Light Ammo",
    "Medium Ammo",
    "Shotgun Ammo",
  ],
  Modifications: [
    "Angled Grip I",
    "Angled Grip II",
    "Angled Grip III",
    "Anvil Splitter",
    "Compensator I",
    "Compensator II",
    "Compensator III",
    "Extended Barrel",
    "Extended Light Mag I",
    "Extended Light Mag II",
    "Extended Light Mag III",
    "Extended Medium Mag I",
    "Extended Medium Mag II",
    "Extended Medium Mag III",
    "Extended Shotgun Mag I",
    "Extended Shotgun Mag II",
    "Extended Shotgun Mag III",
    "Horizontal Grip",
    "Kinetic Converter",
    "Lightweight Stock",
    "Muzzle Brake I",
    "Muzzle Brake II",
    "Muzzle Brake III",
    "Padded Stock",
    "Shotgun Choke I",
    "Shotgun Choke II",
    "Shotgun Choke III",
    "Shotgun Silencer",
    "Silencer I",
    "Silencer II",
    "Silencer III",
    "Stable Stock I",
    "Stable Stock II",
    "Stable Stock III",
    "Vertical Grip I",
    "Vertical Grip II",
    "Vertical Grip III",
  ],
  Weapons: [
    "Anvil",
    "Aphelion",
    "Arpeggio",
    "Bettina",
    "Bobcat",
    "Burletta",
    "Equalizer",
    "Ferro",
    "Hairpin",
    "Hullcracker",
    "Il Toro",
    "Jupiter",
    "Kettle",
    "Osprey",
    "Rattler",
    "Renegade",
    "Stitcher",
    "Tempest",
    "Torrente",
    "Venator",
    "Vulcano",
  ],
  Shields: [
    "Heavy Shield",
    "Light Shield",
    "Medium Shield",
  ],
  Augments: [
    "Combat Mk. 1",
    "Combat Mk. 2",
    "Combat Mk. 3 (Aggressive)",
    "Combat Mk. 3 (Flanking)",
    "Free Loadout Augment",
    "Looting Mk. 1",
    "Looting Mk. 2",
    "Looting Mk. 3 (Cautious)",
    "Looting Mk. 3 (Survivor)",
    "Tactical Mk. 1",
    "Tactical Mk. 2",
    "Tactical Mk. 3 (Defensive)",
    "Tactical Mk. 3 (Healing)",
  ],
  Advanced_Material: [
    "Mod Components",
    "Power Rod",
  ],
  Basic_Material: [
    "Chemicals",
    "Fabric",
    "Metal Parts",
    "Plastic Parts",
    "Rubber Parts",
  ],
  Key: [
    "Blue Gate Cellar Key",
    "Blue Gate Communication Tower Key",
    "Blue Gate Confiscation Room Key",
    "Blue Gate Village Key",
    "Buried City Hospital Key",
    "Buried City JKV Employee Access Card",
    "Buried City Residential Mastery Key",
    "Buried City Town Hall Key",
    "Dam Control Tower Key",
    "Dam Staff Room Key",
    "Dam Surveillance Key",
    "Dam Testing Annex Key",
    "Dam Utility Key",
    "Patrol Car Key",
    "Raider Hatch Key",
    "Spaceport Container Storage Key",
    "Spaceport Control Tower Key",
    "Spaceport Trench Tower Key",
    "Spaceport Warehouse Key",
    "Stella Montis Archives Key",
    "Stella Montis Assembly Admin Key",
    "Stella Montis Medical Storage Key",
    "Stella Montis Security Checkpoint Key",
  ],
  Misc: [
    "Volcanic Rock",
  ],
  Nature: [
    "Agave",
    "Apricot",
    "Assorted Seeds",
    "Fertilizer",
    "Lemon",
    "Mushroom",
    "Olives",
    "Prickly Pear",
    "Resin",
    "Roots",
  ],
  Recyclable: [
    "Alarm Clock",
    "ARC Coolant",
    "ARC Flex Rubber",
    "ARC Performance Steel",
    "ARC Synthetic Resin",
    "ARC Thermo Lining",
    "Bastion Cell",
    "Bicycle Pump",
    "Bombardier Cell",
    "Broken Flashlight",
    "Broken Guidance System",
    "Broken Handheld Radio",
    "Broken Taser",
    "Burned ARC Circuitry",
    "Camera Lens",
    "Candle Holder",
    "Coolant",
    "Cooling Coil",
    "Cooling Fan",
    "Cracked Bioscanner",
    "Crumpled Plastic Bottle",
    "Damaged ARC Motion Core",
    "Damaged ARC Powercell",
    "Damaged Fireball Burner",
    "Damaged Heat Sink",
    "Damaged Hornet Driver",
    "Damaged Rocketeer Driver",
    "Damaged Snitch Scanner",
    "Damaged Tick Pod",
    "Damaged Wasp Driver",
    "Deflated Football",
    "Degraded ARC Rubber",
    "Diving Goggles",
    "Dog Collar",
    "Dried-Out ARC Resin",
    "Expired Respirator",
    "Fireball Burner",
    "Flow Controller",
    "Frequency Modulation Box",
    "Fried Motherboard",
    "Frying Pan",
    "Garlic Press",
    "Geiger Counter",
    "Headphones",
    "Hornet Driver",
    "Household Cleaner",
    "Humidifier",
    "Ice Cream Scooper",
    "Impure ARC Coolant",
    "Industrial Battery",
    "Industrial Charger",
    "Industrial Magnet",
    "Ion Sputter",
    "Laboratory Reagents",
    "Leaper Pulse Unit",
    "Magnetron",
    "Matriarch Reactor",
    "Metal Brackets",
    "Microscope",
    "Mini Centrifuge",
    "Motor",
    "Number Plate",
    "Polluted Air Filter",
    "Pop Trigger",
    "Portable TV",
    "Power Bank",
    "Power Cable",
    "Projector",
    "Queen Reactor",
    "Radio",
    "Radio Relay",
    "Remote Control",
    "Ripped Safety Vest",
    "Rocket Thruster",
    "Rocketeer Driver",
    "Rotary Encoder",
    "Rubber Pad",
    "Ruined Accordion",
    "Ruined Augment",
    "Ruined Baton",
    "Ruined Handcuffs",
    "Ruined Parachute",
    "Ruined Riot Shield",
    "Ruined Tactical Vest",
    "Rusted Bolts",
    "Rusted Gear",
    "Rusted Shut Medical Kit",
    "Rusted Tools",
    "Rusty ARC Steel",
    "Sample Cleaner",
    "Sentinel Firing Core",
    "Shredder Gyro",
    "Signal Amplifier",
    "Snitch Scanner",
    "Spectrometer",
    "Spectrum Analyzer",
    "Spotter Relay",
    "Spring Cushion",
    "Surveyor Vault",
    "Tattered ARC Lining",
    "Tattered Clothes",
    "Telemetry Transceiver",
    "Thermostat",
    "Tick Pod",
    "Toaster",
    "Torn Blanket",
    "Turbo Pump",
    "Unusable Weapon",
    "Wasp Driver",
    "Water Filter",
    "Water Pump",
  ],
  Refined_Material: [
    "Advanced Electrical Components",
    "Advanced Mechanical Components",
    "Antiseptic",
    "Crude Explosives",
    "Durable Cloth",
    "Electrical Components",
    "Explosive Compound",
    "Magnetic Accelerator",
    "Mechanical Components",
  ],
  Topside_Material: [
    "Advanced ARC Powercell",
    "ARC Alloy",
    "ARC Circuitry",
    "ARC Motion Core",
    "ARC Powercell",
    "Battery",
    "Canister",
    "Complex Gun Parts",
    "Duct Tape",
    "Exodus Modules",
    "Great Mullein",
    "Heavy Gun Parts",
    "Light Gun Parts",
    "Magnet",
    "Medium Gun Parts",
    "Moss",
    "Oil",
    "Processor",
    "Rope",
    "Sensors",
    "Simple Gun Parts",
    "Speaker Component",
    "Steel Spring",
    "Synthesized Fuel",
    "Syringe",
    "Voltage Converter",
    "Wires",
  ],
  Trinket: [
    "Air Freshener",
    "Bloated Tuna Can",
    "Breathtaking Snow Globe",
    "Cat Bed",
    "Coffee Pot",
    "Dart Board",
    "Empty Wine Bottle",
    "Expired Pasta",
    "Faded Photograph",
    "Film Reel",
    "Fine Wristwatch",
    "Lance's Mixtape (5th Edition)",
    "Light Bulb",
    "Music Album",
    "Music Box",
    "Painted Box",
    "Playing Cards",
    "Poster Of Natural Wonders",
    "Pottery",
    "Red Coral Jewelry",
    "Rosary",
    "Rubber Duck",
    "Silver Teaspoon Set",
    "Statuette",
    "Torn Book",
    "Vase",
    "Very Comfortable Pillow",
  ],
} as const;

type WikiCategory = keyof typeof WIKI_ITEMS;

const CATEGORY_PRESETS: Record<WikiCategory, CategoryPreset> = {
  Quick_Use: { category: 'consumable', defaultKeepMin: 3 },
  Ammunition: { category: 'ammo', defaultKeepMin: 120 },
  Modifications: { category: 'misc', defaultKeepMin: 1 },
  Weapons: { category: 'weapon', defaultKeepMin: 1 },
  Shields: { category: 'armor', defaultKeepMin: 1 },
  Augments: { category: 'misc', defaultKeepMin: 1, usedForSpecialVendor: true },
  Advanced_Material: { category: 'material', defaultKeepMin: 20, usedForCrafting: true },
  Basic_Material: { category: 'material', defaultKeepMin: 40, usedForCrafting: true },
  Key: { category: 'misc', defaultKeepMin: 1, usedForQuests: true },
  Misc: { category: 'misc', defaultKeepMin: 0 },
  Nature: { category: 'material', defaultKeepMin: 15, usedForCrafting: true },
  Recyclable: { category: 'misc', defaultKeepMin: 0 },
  Refined_Material: { category: 'material', defaultKeepMin: 25, usedForCrafting: true },
  Topside_Material: { category: 'material', defaultKeepMin: 25, usedForCrafting: true },
  Trinket: { category: 'misc', defaultKeepMin: 1, usedForWorkshop: true },
};

const ITEM_OVERRIDES: Record<string, Partial<ItemMetadata>> = {
  // 제작/퀘스트 핵심 재료
  "Mechanical Components": { defaultKeepMin: 50, usedForCrafting: true },
  "Metal Parts": { defaultKeepMin: 100, usedForCrafting: true },
  "Rubber Parts": { defaultKeepMin: 50, usedForCrafting: true },
  "Fabric": { defaultKeepMin: 50, usedForCrafting: true },
  "Electrical Components": { defaultKeepMin: 50, usedForCrafting: true },
  "ARC Alloy": { defaultKeepMin: 20, usedForCrafting: true },
  "Advanced Mechanical Components": { defaultKeepMin: 20, usedForCrafting: true },
  "Laboratory Reagents": { defaultKeepMin: 20, usedForCrafting: true, category: "material" },
  "Queen Reactor": { defaultKeepMin: 1, usedForCrafting: true, category: "material" },
  "ARC Circuitry": { defaultKeepMin: 10, usedForCrafting: true },
  "ARC Motion Core": { defaultKeepMin: 10, usedForCrafting: true },
  "Heavy Gun Parts": { defaultKeepMin: 10, usedForCrafting: true },
  "Light Gun Parts": { defaultKeepMin: 10, usedForCrafting: true },
  "Medium Gun Parts": { defaultKeepMin: 10, usedForCrafting: true },
  "Complex Gun Parts": { defaultKeepMin: 10, usedForCrafting: true },

  // 퀘스트/드롭 특화 아이템
  "Antiseptic": { defaultKeepMin: 10, usedForQuests: true },
  "Canister": { defaultKeepMin: 20, usedForCrafting: true },
  "Chemicals": { defaultKeepMin: 20, usedForCrafting: true },
  "Explosive Compound": { defaultKeepMin: 20, usedForCrafting: true },
  "Fireball Burner": { defaultKeepMin: 5, usedForQuests: true },
  "Hornet Driver": { defaultKeepMin: 5, usedForQuests: true },
  "Leaper Pulse Unit": { defaultKeepMin: 5, usedForQuests: true },
  "Power Rod": { defaultKeepMin: 10, usedForQuests: true },
  "Rocketeer Driver": { defaultKeepMin: 5, usedForQuests: true },
  "Sentinel Firing Core": { defaultKeepMin: 5, usedForQuests: true },
  "Snitch Scanner": { defaultKeepMin: 5, usedForQuests: true },
  "Surveyor Vault": { defaultKeepMin: 3, usedForQuests: true },
  "Tick Pod": { defaultKeepMin: 10, usedForQuests: true },
  "Wasp Driver": { defaultKeepMin: 5, usedForQuests: true },
  "Water Pump": { defaultKeepMin: 2, usedForQuests: true },

  // 소모품 세부 튜닝
  "Adrenaline Shot": { defaultKeepMin: 5 },
  "Agave Juice": { defaultKeepMin: 5 },
  "Bandage": { defaultKeepMin: 20 },
  "Herbal Bandage": { defaultKeepMin: 10 },
  "Sterilized Bandage": { defaultKeepMin: 10 },
  "Fruit Mix": { defaultKeepMin: 5 },
  "Vita Shot": { defaultKeepMin: 5 },
  "Vita Spray": { defaultKeepMin: 5 },

  // 폭발물/함정 (무기 분류 유지)
  "Blaze Grenade": { defaultKeepMin: 5, category: "weapon" },
  "Gas Grenade": { defaultKeepMin: 5, category: "weapon" },
  "Smoke Grenade": { defaultKeepMin: 5, category: "weapon" },
  "Lure Grenade": { defaultKeepMin: 5, category: "weapon" },
  "Explosive Mine": { defaultKeepMin: 5, category: "weapon" },

  // 희귀/시설 업그레이드용 트링켓
  "Apricot": { defaultKeepMin: 5, usedForWorkshop: true },
  "Cat Bed": { defaultKeepMin: 1, usedForWorkshop: true },
  "Dog Collar": { defaultKeepMin: 1, usedForWorkshop: true },
  "Lemon": { defaultKeepMin: 5, usedForWorkshop: true },
  "Mushroom": { defaultKeepMin: 5, usedForWorkshop: true },
  "Olives": { defaultKeepMin: 5, usedForWorkshop: true },
  "Prickly Pear": { defaultKeepMin: 5, usedForWorkshop: true },
  "Very Comfortable Pillow": { defaultKeepMin: 1, usedForWorkshop: true },
  "Light Bulb": { defaultKeepMin: 5, usedForWorkshop: true },
  "Cooling Fan": { defaultKeepMin: 5, usedForWorkshop: true },
};

export const ITEMS_DB: Record<string, ItemMetadata> = Object.entries(WIKI_ITEMS).reduce(
  (acc, [category, names]) => {
    const preset = CATEGORY_PRESETS[category as WikiCategory];
    names.forEach((name) => {
      acc[name] = {
        name,
        category: preset.category,
        usedForCrafting: preset.usedForCrafting,
        usedForQuests: preset.usedForQuests,
        usedForWorkshop: preset.usedForWorkshop,
        usedForSpecialVendor: preset.usedForSpecialVendor,
        defaultKeepMin: preset.defaultKeepMin,
        maxStack: preset.maxStack,
      };
    });
    return acc;
  },
  {} as Record<string, ItemMetadata>
);

Object.entries(ITEM_OVERRIDES).forEach(([name, override]) => {
  if (!ITEMS_DB[name]) {
    ITEMS_DB[name] = {
      name,
      category: override.category || 'misc',
      defaultKeepMin: override.defaultKeepMin,
      usedForCrafting: override.usedForCrafting,
      usedForQuests: override.usedForQuests,
      usedForWorkshop: override.usedForWorkshop,
      usedForSpecialVendor: override.usedForSpecialVendor,
      maxStack: override.maxStack,
    };
    return;
  }
  ITEMS_DB[name] = { ...ITEMS_DB[name], ...override };
});

export const ITEMS = Object.values(ITEMS_DB);
